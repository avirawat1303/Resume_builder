{% extends 'resumes/base.html' %}

{% block title %}Edit Resume{% endblock %}

{% block content %}
<h1>Edit Resume: {{ resume.full_name }}</h1>

<!-- Basic Information -->
<div style="background: #f9f9f9; padding: 1.5rem; border-radius: 10px; margin-bottom: 1.5rem;">
    <h2>Basic Information</h2>
    <form method="post">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit" class="btn">Update Information</button>
    </form>
</div>

<!-- Education Section -->
<div style="background: #f9f9f9; padding: 1.5rem; border-radius: 10px; margin-bottom: 1.5rem;">
    <h2>Education</h2>
    
    <!-- Existing Education -->
    {% if resume.education.all %}
        {% for edu in resume.education.all %}
        <div style="padding: 1rem; border-left: 4px solid #667eea; margin-bottom: 1rem; background: white;">
            <h3>{{ edu.degree }}</h3>
            <p><strong>{{ edu.institution }}</strong></p>
            <p>{{ edu.start_date }} - {{ edu.end_date|default:"Present" }}</p>
        </div>
        {% endfor %}
    {% else %}
        <p>No education entries yet.</p>
    {% endif %}
    
    <!-- Add New Education -->
    <h3>Add Education</h3>
    <form method="post" action="{% url 'add_education' resume.id %}">
        {% csrf_token %}
        {{ education_form.as_p }}
        <button type="submit" class="btn">Add Education</button>
    </form>
</div>

<!-- Experience Section -->
<div style="background: #f9f9f9; padding: 1.5rem; border-radius: 10px; margin-bottom: 1.5rem;">
    <h2>Work Experience</h2>
    
    <!-- Existing Experience -->
    {% for exp in resume.experience.all %}
    <div style="padding: 1rem; border-left: 4px solid #667eea; margin-bottom: 1rem; background: white;">
        <h3>{{ exp.job_title }}</h3>
        <p><strong>{{ exp.company }}</strong></p>
        <p>{{ exp.start_date }} - {{ exp.end_date|default:"Present" }}</p>
        <p>{{ exp.description }}</p>
    </div>
    {% empty %}
        <p>No experience entries yet.</p>
    {% endfor %}
    
    <!-- Add New Experience -->
    <h3>Add Experience</h3>
    <form method="post" action="{% url 'add_experience' resume.id %}">
        {% csrf_token %}
        {{ experience_form.as_p }}
        <button type="submit" class="btn">Add Experience</button>
    </form>
</div>

<!-- Skills Section -->
<div style="background: #f9f9f9; padding: 1.5rem; border-radius: 10px; margin-bottom: 1.5rem;">
    <h2>Skills</h2>
    
    <!-- Existing Skills -->
    {% for skill in resume.skills.all %}
    <div style="padding: 1rem; border-left: 4px solid #667eea; margin-bottom: 1rem; background: white;">
        <h3>{{ skill.name }} ({{ skill.proficiency }})</h3>
    </div>
    {% empty %}
        <p>No skills added yet.</p>
    {% endfor %}
    
    <!-- Add New Skill -->
    <h3>Add Skill</h3>
    <form method="post" action="{% url 'add_skill' resume.id %}">
        {% csrf_token %}
        {{ skill_form.as_p }}
        <button type="submit" class="btn">Add Skill</button>
    </form>
</div>

<!-- Actions -->
<div style="margin-top: 2rem;">
    <a href="{% url 'download_resume' resume.id %}" class="btn" style="background: #28a745;">Download Resume PDF</a>
    <a href="{% url 'dashboard' %}" class="btn" style="background: #6c757d;">Back to Dashboard</a>
</div>
{% endblock %}